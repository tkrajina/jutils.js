<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>

<title>jutils.js example</title>

<link rel="stylesheet" href="jutils.css" type="text/css"> 
<script type='text/javascript' src='jutils.js'></script>

<style type="text/css">
div.test {
	border:1px solid black;
	font-size: 21px;
}
</style>

<script>

var init = function() {

	jutils.transformations = new Object()

	jutils.transformations.transformationObjects = []

	jutils.transformations.transform = function( element, style, from, to, steps ) {
		if( ! steps ) {
			var steps = 100
		}
		if( ! element.transformationSteps ) {
			element.transformationSteps = {}
		}
		if( ! ( style in element.transformationSteps ) ) {
			element.transformationSteps[ style ] = []
		}

		var _from = Math.min( from, to )
		var _to = Math.max( from, to )
		var step = ( _to - _from ) / steps
		for( i = _from; i < _to; i += step ) {
			element.transformationSteps[ style ].push( i + 'px' )
		}

		var found = false
		for( i in jutils.transformations.transformationObjects ) {
			if( jutils.transformations.transformationObjects[ i ] == element ) {
				found = true
			}
		}
		if( ! found ) {
			jutils.transformations.transformationObjects.push( element )
		}
	}

	jutils.transformations.executeTransformationStep = function( element ) {

		if( ! element.transformationSteps ) {
			return false
		}

		var executed = false

		for( style in element.transformationSteps ) {
			if( element.transformationSteps[ style ] ) {
				var value = element.transformationSteps[ style ].pop()
				if( value ) {
					element.style[ style ] = value
					executed = true
				}
			}
		}

		return executed
	}

	jutils.transformations.execute = function() {
		var executed = false
		for( i in jutils.transformations.transformationObjects ) {
			var element = jutils.transformations.transformationObjects[ i ]
			executed = jutils.transformations.executeTransformationStep( element ) || executed
		}
		if( executed ) {
			setTimeout( 'jutils.transformations.execute()', 20 )
		}
	}

	/*
	*/
	var element = jutils.dom.byId( 'test' )
	jutils.transformations.transform( element, 'font-size', 10, 200 )
	jutils.transformations.transform( element, 'border-top-width', 1, 30 )
	jutils.transformations.transform( element, 'border-left-width', 1, 60 )

	var element = jutils.dom.byId( 'test2' )
	jutils.transformations.transform( element, 'font-size', 100, 20 )

	jutils.transformations.execute()
}

</script>

</head>
<body onload="init()">

<div class="test" id="test">
	test 1 2 3
</div>

<div class="test" id="test2">
	test 1 2 3
</div>

</body>
</html>
